<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Smart Map with Categories</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
  />
  <style>
    :root {
      --bg-light: #ffffff;
      --text-light: #000000;
      --bg-dark: #1e1e1e;
      --text-dark: #ffffff;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background-color: var(--bg-light);
      color: var(--text-light);
      transition: background 0.3s, color 0.3s;
    }

    .dark-mode {
      background-color: var(--bg-dark);
      color: var(--text-dark);
    }

    #map {
      height: 100vh;
      width: 100vw;
      position: relative;
    }

    .legend {
      position: absolute;
      top: 15px;
      left: 15px;
      background-color: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      padding: 12px 15px;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.2);
      font-size: 14px;
      line-height: 1.6;
      z-index: 1000;
    }

    .dark-mode .legend {
      background-color: rgba(34, 34, 34, 0.95);
      color: white;
    }

    .map-btn {
      position: absolute;
      padding: 10px 14px;
      border: none;
      border-radius: 8px;
      background: #007bff;
      color: white;
      font-size: 14px;
      cursor: pointer;
      z-index: 1000;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
    }

    .map-btn:hover {
      background-color: #0056b3;
    }

    .locate-btn {
      bottom: 80px;
      left: 20px;
    }

    .mode-toggle-btn {
      bottom: 20px;
      left: 20px;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <div class="legend">
    <strong>Legend</strong><br />
    ğŸ’Š Medical Shops<br />
    ğŸª Supermarkets<br />
    ğŸ“± Electronics<br />
    ğŸ‘“ Optical Shops<br />
    ğŸ“š Education<br />
    ğŸ“ You (Static)
  </div>
  <button class="map-btn locate-btn" onclick="recenterUser()">ğŸ“ Locate Me</button>
  <button class="map-btn mode-toggle-btn" onclick="toggleMode()">ğŸŒ“ Toggle Mode</button>

  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([17.4, 78.44], 13);

    const lightTile = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap contributors'
    });

    const darkTile = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      maxZoom: 19,
      attribution: '&copy; <a href="https://carto.com/">CARTO</a>'
    });

    lightTile.addTo(map);
    let currentTile = lightTile;

    function toggleMode() {
      document.body.classList.toggle("dark-mode");
      if (document.body.classList.contains("dark-mode")) {
        map.removeLayer(currentTile);
        darkTile.addTo(map);
        currentTile = darkTile;
      } else {
        map.removeLayer(currentTile);
        lightTile.addTo(map);
        currentTile = lightTile;
      }
    }

    const locations = [
      { name: "Sri Dattha Sai Medical Hall", coords: [17.473908, 78.562599], emoji: "ğŸ’Š" },
      { name: "Aster Pharmacy", coords: [17.395280, 78.434877], emoji: "ğŸ’Š" },
      { name: "A R IRIS PHARMACY", coords: [17.394297, 78.426337], emoji: "ğŸ’Š" },
      { name: "V Care Medical Store", coords: [17.403125, 78.417145], emoji: "ğŸ’Š" },

      { name: "Dilip Super Market", coords: [17.401091, 78.387700], emoji: "ğŸª" },
      { name: "Shiv Super Market", coords: [17.396254, 78.442759], emoji: "ğŸª" },
      { name: "Anusha Bazzar", coords: [17.474902, 78.561775], emoji: "ğŸª" },
      { name: "Anasuya Super Market", coords: [17.463277, 78.562375], emoji: "ğŸª" },

      { name: "NARZO & REALME STORE", coords: [17.395350, 78.437287], emoji: "ğŸ“±" },
      { name: "NEW VIGG ELECTRONICS", coords: [17.399527, 78.445054], emoji: "ğŸ“±" },
      { name: "S.R. Electronics", coords: [17.381753, 78.439604], emoji: "ğŸ“±" },
      { name: "Deccan Tech Store", coords: [17.394887, 78.427330], emoji: "ğŸ“±" },

      { name: "AL-NOOR OPTICAL", coords: [17.394254, 78.438743], emoji: "ğŸ‘“" },
      { name: "The Indo Optician", coords: [17.393081, 78.437347], emoji: "ğŸ‘“" },
      { name: "Indian Optical", coords: [17.390470, 78.440362], emoji: "ğŸ‘“" },
      { name: "Indian Optical & Watch Store", coords: [17.394946, 78.441926], emoji: "ğŸ‘“" },

      { name: "Physics Wallah", coords: [17.443485, 78.397242], emoji: "ğŸ“š" },
      { name: "Vedantu Learning", coords: [17.454350, 78.387106], emoji: "ğŸ“š" },
      { name: "Resonance School", coords: [17.454695, 78.392075], emoji: "ğŸ“š" },
      { name: "Wisdom Academy", coords: [17.476134, 78.562750], emoji: "ğŸ“š" },
    ];

    locations.forEach(loc => {
      L.marker(loc.coords, {
        icon: L.divIcon({
          html: `<div style="font-size: 20px;">${loc.emoji}</div>`
        })
      }).addTo(map).bindPopup(`<b>${loc.name}</b>`);
    });

    // Static user location
    const userLatLng = [17.34402504503671, 78.32396505071084];

    const userMarker = L.marker(userLatLng, {
      icon: L.divIcon({
        html: `<div style="font-size: 20px;">ğŸ“</div>`
      })
    }).addTo(map).bindPopup("ğŸ“ You are here").openPopup();

    function recenterUser() {
      map.setView(userLatLng, 16);
    }
  </script>
</body>
</html>
